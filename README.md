Lab Script 1 — Backup & Log Archiver
Скрипт для автоматической архивации файлов из раздела /LOG в раздел /BACKUP
при превышении заданного порога использования диска.
Работает в среде Linux/WSL и написан на Bash.

В WSL при отсутствии разделов /LOG и /BACKUP необходимо их создать:
```bash
mkdir -p ~/lab_disks

dd if=/dev/zero of=~/lab_disks/log.img bs=1M count=100
dd if=/dev/zero of=~/lab_disks/backup.img bs=1M count=100

mkfs.ext4 ~/lab_disks/log.img
mkfs.ext4 ~/lab_disks/backup.img

sudo mkdir -p /LOG /BACKUP
sudo mount -o loop ~/lab_disks/log.img /LOG
sudo mount -o loop ~/lab_disks/backup.img /BACKUP
```

**Использование:**
```bash
./script.sh <LIMIT_PERCENT> <FILES_COUNT>
```
<LOG_DIR> - путь к разделу с логами (/LOG)
<LIMIT_PERCENT> - порог заполнения раздела (например, 30)
<FILES_COUNT> - количество файлов для архивации при превышении лимита

## Примечания
Помимо базового функционала, необходимого для сдачи лабораторной работы, в скрипте также предусмотрены нетипичные случаи при архивации, такие как:
- Нехватка места в директории BACKUP
- Действие скрипта при отсутствии файлов в директории LOG
- Отсутствие /LOG и /BACKUP
Также был написан мини-скрипт, который создает файлы для тестирования работы скрипта script_files

# Тестирование скрипта архивации

Скрипт предназначен для архивации файлов из директории `/LOG` в раздел `/BACKUP`.  
Файлы для архивации называются `testfile0`, `testfile1` и так далее. Ниже представлены возможные тесты и ожидаемые результаты.

---

## 1. Тест: Нет файлов для архивации

**Условия:**  
- Директория `/LOG` существует, но пуста.  
- Любой лимит задан произвольно.

**Ожидаемый результат:**  
- Скрипт сообщает: `Нет файлов для архивации`.  
- Архив не создаётся.  
- Раздел `/BACKUP` остаётся неизменным.

---

## 2. Тест: Превышен лимит заполнения `/LOG`

**Условия:**  
- Директория `/LOG` содержит несколько файлов `testfile0`, `testfile1`…  
- Процент заполнения `/LOG` выше установленного лимита.

**Ожидаемый результат:**  
- Скрипт запускает архивацию.  
- Архив создаётся в `/BACKUP` с уникальным именем `archive_YYYY-MM-DD_HH:MM:SS.tar.gz`.  
- Файлы `testfile0`, `testfile1` удаляются из `/LOG` после архивации.  

---

## 3. Тест: Недостаточно места на `/BACKUP`

**Условия:**  
- `/LOG` содержит файлы для архивации.  
- Раздел `/BACKUP` заполнен более чем на 95% или свободного места меньше, чем размер архива.

**Ожидаемый результат:**  
- Скрипт сообщает: `На разделе BACKUP недостаточно места для архива`.  
- Архив не создаётся.  
- Файлы в `/LOG` остаются без изменений.  

---

## 4. Тест: Разделы `/LOG` или `/BACKUP` не смонтированы

**Условия:**  
- Любой из разделов не смонтирован.

**Ожидаемый результат:**  
- Скрипт сообщает: `Не существует раздела /LOG` `Не существует раздела /BACKUP`.  
- Архивирование не выполняется.  

---

## 5. Тест: Архивация без сжатия (тестовый файл ~1 МБ)

**Условия:**  
- В `/LOG` находятся файлы `testfile0`, `testfile1` по 1 МБ.  
- Лимит заполнения превышен.  
- Архив создаётся **без сжатия** (tar без `-z`).

**Ожидаемый результат:**  
- Архив в `/BACKUP` содержит файлы почти точно того же размера, что и исходные.  
- Сжатие не применялось, вес архива ~ сумма файлов.  

---

## 6. Тест: Несколько файлов для архивации

**Условия:**  
- В `/LOG` больше файлов, чем указано в параметре `count`.  
- Скрипт должен архивировать только первые `$count` файлов (по времени изменения).

**Ожидаемый результат:**  
- В архив попадают только первые `$count` файлов (например, `testfile0`, `testfile1`).  
- Остальные файлы остаются в `/LOG`.

---

## 7. Тест: Архив уже существует с одинаковым именем

**Условия:**  
- В `/BACKUP` уже есть архив с текущей датой и временем (редко, но возможно).

**Ожидаемый результат:**  
- Скрипт создаёт новый архив с уникальным именем, не перезаписывая существующий.  

---

## 8. Тест: Перезапись файлов при повторной архивации

**Условия:**  
- Скрипт запускается несколько раз подряд.  
- В `/LOG` появляются новые файлы с теми же именами.

**Ожидаемый результат:**  
- Новые файлы архивируются в новый архив.  
- Старые файлы не удаляются повторно.  
- Архивы в `/BACKUP` имеют уникальные имена.

---


- Все тесты можно проводить с тестовыми файлами `testfile0`, `testfile1`, … созданными через:
  ```bash
  dd if=/dev/urandom of=/LOG/testfile0 bs=1M count=1
